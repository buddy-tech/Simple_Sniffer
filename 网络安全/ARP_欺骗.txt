Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.4
Creation-Date: 2018-12-01T09:49:20+08:00

====== ARP 欺骗 ======
Created Saturday 01 December 2018

===== 什么是 ARP =====
* 全称 Address Resolution Protocol，地址转换协议
* 链路层协议，即 OSI 模型第二层
* 作用是确定 IP 地址和 MAC 地址之间的对应关系
* ARP 缓存表采用了老化机制，在一段时间内如果表中的某一行没有使用，就会被删除。（所以使用 arp -a 可能只要网关的记录）

工作过程：
1. 请求主机会发送出一个含有所希望到达的 IP 地址的以太网广播数据包
2. 目标 IP 的所有者会以一个含有 IP 和 MAC 地址对的数据包应答请求主机
3. 请求主机获得要到达的 IP 地址对应的 MAC 地址，同时请求主机会将这个地址对放入 ARP 表

===== ARP 欺骗 =====
利用点：
局域网上的一台主机，如果接收到一个 ARP 报文，即使该报文不是该主机所发送的 ARP 请求的应答报文，该主机也会将 ARP 报文中的发送者的 MAC 地址和 IP 地址更新或加入到 ARP 表中。

攻击过程：
攻击者主动发送 ARP 报文，发送者的 MAC 地址为攻击者主机的 MAC 地址，发送者的 IP 地址为被攻击主机的 IP 地址。通过不断发送这些伪造的 ARP 报文，让局域网上所有的主机和网关 ARP 表，其对应的 MAC 地址均为攻击者的 MAC 地址，这样所有的网络流量都会发送给攻击者主机。
